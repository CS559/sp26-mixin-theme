{{/* should take two (three) parameters: the key for the assignment and a list of optional modifier words, which might be due, short (more to be added)
    the third parameter is a page link - if that's given, the canvas link is given separately

    this is historically in each site, not in the theme (?)

    The assigns file is in data/assigns.yaml, and is generated by
    a Python script.
    */}}
{{- $assign := index .Site.Data.assignments (.Get 0) -}}
{{- $name := cond (in (.Get 1) "short") $assign.shortname $assign.name }}
{{- $link := cond (ne (.Get 2) "") (relref . (.Get 2)) $assign.url}}
{{- if $assign -}}
<a href="{{$link}}" target="_blank">{{- $name -}} {{- if in (.Get 1) "due" }}&nbsp;({{- if (ne (.Get 2) "")}}</a><a href="{{$assign.url}}" target="_blank">Canvas{{- else}}due{{- end}} {{index $assign "due_string"}}){{- end }}</a>
{{- else -}}
    {{- if eq (.Get 0) "TBD" }}
    TBD
    {{- else }}
        {{ errorf "can't find assignment '%s' at %s" (.Get 0) .Position }}
    {{- end -}}
{{- end -}}
